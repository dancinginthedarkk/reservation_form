<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: index.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: index.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @module index
 */

import './index.css';
import { isDatetimeValid, validateCustomSelects } from './validation.js';
import { clearErrorMessages, showErrorMessage } from './errorHandling.js';
import { getValue } from './options.js';

const form = document.querySelector('#booking-form');
const towerSelect = document.querySelector('#tower');
const floorSelect = document.querySelector('#floor');
const intercomSelect = document.querySelector('#intercom');
const sendBtn = document.querySelector('#send-btn');
const clearBtn = document.querySelector('#clear-btn');

const datetimeInput = document.querySelector('#datetime');
const error = document.querySelector('#error');

/**
 * Прослушиватель события для кнопки отправления по клику, который перед отправкой проверяет валидацию полей,
 * берет значения селекторов и пишет в консоль значения формы в виде json (без обновления страницы).
 * @listens sendBtn#click
 * @param {Event} event - event объект.
 */
sendBtn.addEventListener('click', function (event) {
    event.preventDefault();

    clearErrorMessages();

    if (!validateCustomSelects()) {
        showErrorMessage(error, 'Необходимо заполнить все поля формы.');
        return;
    }

    if (!isDatetimeValid(datetimeInput.value)) {
        showErrorMessage(error, 'Данные дата и/или время недействительны! Введите другие значения.');
        return;
    }

    const formData = {
        tower: getValue('#tower'),
        floor: getValue('#floor'),
        intercom: getValue('#intercom'),
        datetime: getValue('#datetime'),
        comment: getValue('#comment'),
    };

    console.log(JSON.stringify(formData));
});

/**
 * Прослушиватель события для кнопки очищения по клику, который очищает форму
 * и возвращает селекторам дефолтные значения (без обновления страницы).
 * @listens clearBtn#click
 * @param {Event} event - event объект.
 */
clearBtn.addEventListener('click', function (event) {
    event.preventDefault();
    towerSelect.value = "Выберите башню";
    towerSelect.textContent = "Выберите башню";

    floorSelect.value = "Выберите этаж";
    floorSelect.textContent = "Выберите этаж";

    intercomSelect.value = "Выберите комнату";
    intercomSelect.textContent = "Выберите комнату";
    form.reset();
    clearErrorMessages();
});

</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-errorHandling.html">errorHandling</a></li><li><a href="module-index.html">index</a></li><li><a href="module-options.html">options</a></li><li><a href="module-validation.html">validation</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Wed May 10 2023 20:19:38 GMT+0300 (Волгоград, стандартное время)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
